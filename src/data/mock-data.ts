import { Customer, Loan, Activity } from '@/types';
import { addDays, format, differenceInDays } from 'date-fns';

// Generate a random ticket number
const generateTicketNumber = () => {
  const prefix = 'PT';
  const date = format(new Date(), 'yyMMdd');
  const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
  return `${prefix}${date}-${random}`;
};

// Mock customers
export const mockCustomers: Customer[] = [
  {
    id: '1',
    fullName: 'Juan Dela Cruz',
    dateOfBirth: '1985-05-15',
    phone: '+63 912 345 6789',
    email: 'juan@email.com',
    address: '123 Main St, Barangay San Jose, Quezon City, Metro Manila',
    idType: 'drivers_license',
    idNumber: 'N01-12-345678',
    photo: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',
    idFrontPhoto: '',
    idBackPhoto: '',
    signature: '',
    watchlistStatus: 'clear',
    activeLoansCount: 2,
    totalLoansTaken: 8,
    createdAt: '2023-01-15',
    updatedAt: '2024-01-20',
  },
  {
    id: '2',
    fullName: 'Maria Santos',
    dateOfBirth: '1990-08-22',
    phone: '+63 917 888 9999',
    email: 'maria.santos@email.com',
    address: '456 Rizal Ave, Barangay Poblacion, Makati City',
    idType: 'umid',
    idNumber: 'CRN-1234-5678-9012',
    photo: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=150&h=150&fit=crop&crop=face',
    idFrontPhoto: '',
    idBackPhoto: '',
    signature: '',
    watchlistStatus: 'clear',
    activeLoansCount: 1,
    totalLoansTaken: 3,
    createdAt: '2023-06-10',
    updatedAt: '2024-01-18',
  },
  {
    id: '3',
    fullName: 'Pedro Reyes',
    dateOfBirth: '1978-12-03',
    phone: '+63 922 555 1234',
    email: '',
    address: '789 Bonifacio St, Barangay Santo Niño, Pasig City',
    idType: 'sss',
    idNumber: '03-1234567-8',
    photo: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',
    idFrontPhoto: '',
    idBackPhoto: '',
    signature: '',
    watchlistStatus: 'flagged',
    activeLoansCount: 3,
    totalLoansTaken: 15,
    createdAt: '2022-03-20',
    updatedAt: '2024-01-15',
  },
  {
    id: '4',
    fullName: 'Ana Garcia',
    dateOfBirth: '1995-02-28',
    phone: '+63 935 777 4567',
    email: 'ana.garcia@email.com',
    address: '321 Mabini St, Barangay Central, Mandaluyong City',
    idType: 'passport',
    idNumber: 'P1234567A',
    photo: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face',
    idFrontPhoto: '',
    idBackPhoto: '',
    signature: '',
    watchlistStatus: 'clear',
    activeLoansCount: 0,
    totalLoansTaken: 2,
    createdAt: '2023-09-05',
    updatedAt: '2024-01-10',
  },
];

// Generate mock loans
const today = new Date();
export const mockLoans: Loan[] = [
  {
    id: '1',
    ticketNumber: 'PT240115-0001',
    customerId: '1',
    customer: mockCustomers[0],
    itemId: '1',
    item: {
      id: '1',
      category: 'gold',
      photos: ['https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=200&h=200&fit=crop'],
      appraisalValue: 25000,
      description: '18K gold necklace with pendant',
      goldType: 'necklace',
      weight: 8.5,
      karat: '18k',
      pricePerGram: 2800,
    },
    principal: 15000,
    interestRate: 3,
    loanPeriodDays: 30,
    serviceFee: 100,
    loanDate: format(addDays(today, -25), 'yyyy-MM-dd'),
    maturityDate: format(addDays(today, 5), 'yyyy-MM-dd'),
    totalDue: 15550,
    status: 'active',
    paymentStatus: 'due-soon',
    daysUntilDue: 5,
    penalties: 0,
    branchId: '1',
    createdBy: 'staff1',
    createdAt: format(addDays(today, -25), 'yyyy-MM-dd'),
    updatedAt: format(addDays(today, -25), 'yyyy-MM-dd'),
  },
  {
    id: '2',
    ticketNumber: 'PT240110-0002',
    customerId: '2',
    customer: mockCustomers[1],
    itemId: '2',
    item: {
      id: '2',
      category: 'electronics',
      photos: ['https://images.unsplash.com/photo-1517336714731-489689fd1ca4?w=200&h=200&fit=crop'],
      appraisalValue: 45000,
      description: 'MacBook Pro 14" M2 Pro',
      brand: 'Apple',
      model: 'MacBook Pro 14" M2 Pro 2023',
      serialNumber: 'C02XL0GTJGH5',
      condition: 'excellent',
    },
    principal: 30000,
    interestRate: 3.5,
    loanPeriodDays: 60,
    serviceFee: 150,
    loanDate: format(addDays(today, -45), 'yyyy-MM-dd'),
    maturityDate: format(addDays(today, 15), 'yyyy-MM-dd'),
    totalDue: 32250,
    status: 'active',
    paymentStatus: 'current',
    daysUntilDue: 15,
    penalties: 0,
    branchId: '1',
    createdBy: 'staff1',
    createdAt: format(addDays(today, -45), 'yyyy-MM-dd'),
    updatedAt: format(addDays(today, -45), 'yyyy-MM-dd'),
  },
  {
    id: '3',
    ticketNumber: 'PT231220-0003',
    customerId: '3',
    customer: mockCustomers[2],
    itemId: '3',
    item: {
      id: '3',
      category: 'gold',
      photos: ['https://images.unsplash.com/photo-1605100804763-247f67b3557e?w=200&h=200&fit=crop'],
      appraisalValue: 35000,
      description: '21K gold bracelet',
      goldType: 'bracelet',
      weight: 12.3,
      karat: '21k',
      pricePerGram: 2900,
    },
    principal: 25000,
    interestRate: 3,
    loanPeriodDays: 30,
    serviceFee: 100,
    loanDate: format(addDays(today, -38), 'yyyy-MM-dd'),
    maturityDate: format(addDays(today, -8), 'yyyy-MM-dd'),
    totalDue: 26600,
    status: 'active',
    paymentStatus: 'overdue',
    daysUntilDue: -8,
    penalties: 400,
    branchId: '1',
    createdBy: 'staff1',
    createdAt: format(addDays(today, -38), 'yyyy-MM-dd'),
    updatedAt: format(today, 'yyyy-MM-dd'),
  },
  {
    id: '4',
    ticketNumber: 'PT240120-0004',
    customerId: '1',
    customer: mockCustomers[0],
    itemId: '4',
    item: {
      id: '4',
      category: 'mobile',
      photos: ['https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=200&h=200&fit=crop'],
      appraisalValue: 55000,
      description: 'iPhone 15 Pro Max 256GB',
      brand: 'Apple',
      model: 'iPhone 15 Pro Max',
      serialNumber: 'DNQXJ012KPH3',
      condition: 'excellent',
    },
    principal: 40000,
    interestRate: 3,
    loanPeriodDays: 30,
    serviceFee: 150,
    loanDate: format(addDays(today, -5), 'yyyy-MM-dd'),
    maturityDate: format(addDays(today, 25), 'yyyy-MM-dd'),
    totalDue: 41350,
    status: 'active',
    paymentStatus: 'current',
    daysUntilDue: 25,
    penalties: 0,
    branchId: '1',
    createdBy: 'staff2',
    createdAt: format(addDays(today, -5), 'yyyy-MM-dd'),
    updatedAt: format(addDays(today, -5), 'yyyy-MM-dd'),
  },
  {
    id: '5',
    ticketNumber: 'PT240118-0005',
    customerId: '4',
    customer: mockCustomers[3],
    itemId: '5',
    item: {
      id: '5',
      category: 'gold',
      photos: ['https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?w=200&h=200&fit=crop'],
      appraisalValue: 18000,
      description: '14K gold ring with diamond',
      goldType: 'ring',
      weight: 5.2,
      karat: '14k',
      pricePerGram: 2400,
    },
    principal: 12000,
    interestRate: 3,
    loanPeriodDays: 30,
    serviceFee: 50,
    loanDate: format(addDays(today, -12), 'yyyy-MM-dd'),
    maturityDate: format(addDays(today, 18), 'yyyy-MM-dd'),
    totalDue: 12410,
    status: 'active',
    paymentStatus: 'current',
    daysUntilDue: 18,
    penalties: 0,
    branchId: '1',
    createdBy: 'staff1',
    createdAt: format(addDays(today, -12), 'yyyy-MM-dd'),
    updatedAt: format(addDays(today, -12), 'yyyy-MM-dd'),
  },
];

// Mock activities
export const mockActivities: Activity[] = [
  {
    id: '1',
    type: 'new_loan',
    description: 'New loan created for Juan Dela Cruz - ₱40,000',
    timestamp: format(addDays(today, -1), "yyyy-MM-dd'T'HH:mm:ss"),
    user: 'Maria Staff',
  },
  {
    id: '2',
    type: 'redemption',
    description: 'Loan redeemed by Ana Garcia - ₱8,500',
    timestamp: format(addDays(today, -1), "yyyy-MM-dd'T'HH:mm:ss"),
    user: 'Juan Teller',
  },
  {
    id: '3',
    type: 'renewal',
    description: 'Loan renewed for Pedro Reyes - Extended 30 days',
    timestamp: format(addDays(today, -2), "yyyy-MM-dd'T'HH:mm:ss"),
    user: 'Maria Staff',
  },
  {
    id: '4',
    type: 'new_customer',
    description: 'New customer registered: Carlo Mendoza',
    timestamp: format(addDays(today, -2), "yyyy-MM-dd'T'HH:mm:ss"),
    user: 'Juan Teller',
  },
  {
    id: '5',
    type: 'new_loan',
    description: 'New loan created for Maria Santos - ₱30,000',
    timestamp: format(addDays(today, -3), "yyyy-MM-dd'T'HH:mm:ss"),
    user: 'Maria Staff',
  },
];

// Dashboard stats
export const dashboardStats = {
  cashDisbursedToday: 125450,
  cashCollectedToday: 89200,
  activeLoans: 127,
  loansDueToday: 15,
  totalCapitalOut: 2458900,
};
